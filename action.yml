name: 'Build Isabelle Theory'
description: 'Build an Isabelle theory file.'
inputs:
  theory-root:
    description: 'Path to the root of the theory. This defaults to the root of the repository.'
    default: ''
  session-name:
    description: 'The session name to build (with isabelle build -b session-name). This defaults to the name of the repository.'
    default: ''
  depends:
    description: 'A whitespace-separated list of other repositories containing sessions that are required to build the session in the current repository. Use url@ref syntax to specify a git ref.'
    default: ''

runs:
  using: "composite"
  steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    - run: sudo apt-get update -y
      shell: bash
    - run: sudo apt-get install -y xonsh python3-yaml atool texlive texlive-plain-generic texlive-science texlive-latex-extra
      shell: bash
    - run: build_isabelle_theory "${{ inputs.theory-root }}" "${{ inputs.session_name }}" "${{ inputs.depends }}"
      shell: bash
